$(document).ready(function(){function e(b,a){"yes"!==a.hidden&&(a.hasOwnProperty("station")||(a.station="KGAFLOWE8"),$.getJSON(a.link+"?nocache="+(new Date).getTime()+"&station="+a.station,function(c){var g,d,e,f,l,m,n,p,q,r;g=c.current_observation.observation_epoch;d=Math.round((new Date).getTime()/1E3);e=c.current_observation.feelslike_f;-999==e&&(e="--");f=c.current_observation.temp_f;-999==f&&(f="--");l=c.current_observation.weather;m=c.current_observation.wind_degrees;n=c.current_observation.wind_dir;
p=.868976*c.current_observation.wind_mph;q=.868976*c.current_observation.wind_gust_mph;r=c.current_observation.history_url;var k=$('<div class="weather_container"></div>'),h=$('<div class="weather_temp"></div>').appendTo(k);h.append('<div class="weather_temp_main">'+f+"<span>\u00b0F</span></div>");h.append('<div class="weather_temp_feels">Feels Like '+e+"<span>\u00b0F</span></div>");var t=makeid();e=$('<div class="weather_wind"></div>').appendTo(k);f=$('<div class="weather_wind_rose"></div>');h=$('<img src="https://www.gtsailing.org/links/rose.svg" alt="Wind rose">').appendTo(f);
-999!=c.current_observation.wind_mph?(h.css("transform","rotate("+m+"deg)"),e.append(f),e.append('<div class="wind_speed_text">'+Math.round(10*p)/10+"<span>kts</span></div>"),e.append('<div class="weather_wind_text"><div class="wind_dir">Wind from <span>'+n+'</span></div><div class="wind_gusts">Gusts <span>'+Math.round(10*q)/10+"</span> kts</div></div>")):(h.css("transform","rotate(0deg)"),e.append(f),e.append('<div class="wind_speed_text">--<span>kts</span></div>'),e.append('<div class="weather_wind_text"><div class="wind_dir">Wind from <span>--</span></div><div class="wind_gusts">Gusts <span>--</span> kts</div></div>'));
b.append('<div class="sep"><div class="titleText noselect">'+a.title+"</div></div>");b.append(k);b.append('<div class="weather_sysn">'+l+"</div>");b.append('<div class="weather_link"><a href="'+r+'&apiref=b86500bfecb900b0" target="_blank">Full Station Weather</a> <span id="weather_timestamp'+t+'">Last Updated: '+getDifference(d,g)+" ago</span></div>");setInterval(function(){$("#weather_timestamp"+t).html("Last Updated: "+getDifference(Math.round((new Date).getTime()/1E3),g)+" ago")},2E3)}))}function f(b,
a){b.append('<div class="sep"><div class="titleText noselect">'+a.title+"</div></div>");"yes"!==a.hidden&&$.getJSON(a.link,function(c){for(var a='<p style="margin-bottom:2px; font-weight:600;">Skippers:</p>',d=0;d<c.skipper.length;d++)a=""!==c.skipper[d].name?a+(d+1+": "+sname(c.skipper[d].name)+" "+c.skipper[d].val+"<br/>"):a+(d+1+": None<br/>");b.append('<div style="float:left; font-weight:200; margin-left:5px; width:170px; text-overflow: ellipsis;">'+a+"</div>");a='<p style="margin-bottom:2px; font-weight:600;">Crew:</p>';
for(d=0;d<c.crew.length;d++)a=""!==c.crew[d].name?a+(d+1+": "+sname(c.crew[d].name)+" "+c.crew[d].val+"<br/>"):a+(d+1+": None<br/>");b.append('<div style="float:right; font-weight:200; margin-right:5px; width:170px; text-overflow: ellipsis;">'+a+"</div>");a='<p style="margin-bottom:2px; font-weight:600;">Raceteam:</p>';for(d=0;d<c.raceteam.length;d++)a=""!==c.raceteam[d].name?a+(d+1+": "+sname(c.raceteam[d].name)+" "+c.raceteam[d].val+"<br/>"):a+(d+1+": None<br/>");b.append('<div style="float:left; font-weight:200; margin-left:5px; width:170px; text-overflow: ellipsis;">'+
a+"</div>");a='<p style="margin-bottom:2px; font-weight:600;">Overall Members:</p>';for(d=0;d<c.member.length;d++)a=""!==c.member[d].name?a+(d+1+": "+sname(c.member[d].name)+" "+c.member[d].val+"<br/>"):a+(d+1+": None<br/>");b.append('<div style="float:right; font-weight:200; margin-right:5px; width:170px; text-overflow: ellipsis;">'+a+"</div>");console.log("Ha. Nerd. -Some old GT Exec");console.log("");console.log("Dehash (md5): 667e96841efd7a653610e2f3eba36b48");console.log("Solution has 14 lowercase letters only. Two words,\nno spaces. The solution's CRC32 is 0x12BC1CB9.")})}
$.getJSON("json/siteData.json?nocache="+(new Date).getTime(),function(b){var a=getUrlParameter("target");if(void 0!==a&&(a=b.redirects[a],void 0!==a&&""!==a)){window.location.replace(a);$("body").html("");return}$("body").css("display","block");for(var a=b.elements,c=0;c<a.length;c++){var g="";void 0!==a[c]["float"]&&"right"===a[c]["float"]?g=" right":void 0!==a[c]["float"]&&"center"===a[c]["float"]&&(g=" center");"sep"===a[c].type||void 0===a[c].link?$("#links").append('<div class="sep"><div class="titleText noselect">'+
a[c].title+"</div></div>"):"weather"===a[c].type?(g=$('<div id="weather"></div>'),$("#links").append(g),e(g,a[c])):"leaderboard"===a[c].type?(g=$('<div id="leaderboard"></div>'),$("#links").append(g),f(g,a[c])):$("#links").append('<div class="LinkHolder noHighlight'+g+'" href="'+a[c].link+'">\n              '+a[c].title+'\n              <div class="linkIcon ease">\n                <img src="https://gtsailing.org/links/'+a[c].ico+'" height="22px" alt="'+a[c].title+'"/>\n              </div>\n            </div>')}$("#footer span#version").html(" v"+
b.version);$("#footer span#date").html((new Date).getFullYear());"yes"==b.banner.display&&($("#notice").css("display","block"),$("#notice").css("color",b.banner.textcolor),$("#notice").css("background-color",b.banner.bgcolor),""!==b.banner.link?$("#notice").html('<a target="_blank" href="'+b.banner.link+'">'+b.banner.text+"</a>"):$("#notice").html(b.banner.text),void 0!==b.banner.timeout&&-1!=parseInt(b.banner.timeout)&&setTimeout(function(){$("#notice").css("display","none")},parseInt(b.banner.timeout)));
a=$("#html_version").text();b.html_version!==a&&bannerError(b.invalid_version_error);$(".LinkHolder").click(function(a){if(-1!=navigator.platform.indexOf("iPhone")||-1!=navigator.platform.indexOf("iPod")){a=document.createElement("a");a.setAttribute("href",$(this).attr("href"));a.setAttribute("target","_blank");var b=document.createEvent("HTMLEvents");b.initEvent("click",!0,!0);a.dispatchEvent(b)}else window.open($(this).attr("href"),"_blank")})}).fail(function(b){$("body").css("display","block");
bannerError('Client error: "'+b.status+" "+b.statusText+'". Please Reload.');console.log(b)})});function bannerError(e){$("#notice").css("display","block");$("#notice").css("color","white");$("#notice").css("background-color","red");$("#notice").html(e)}function sname(e){return 16<e.length?e.substr(0,14)+"...":e}
function getDifference(e,f){var b=e-f;return 60>=b?Math.round(10*b)/10+"s":3600>=b?Math.round(b/60*10)/10+"m":86400>=b?Math.round(b/3600*10)/10+"h":604800>=b?Math.round(b/86400*10)/10+"d":Math.round(b/604800*10)/10+"w"}function makeid(){for(var e="",f=0;5>f;f++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return e}
function getUrlParameter(e){var f=decodeURIComponent(window.location.search.substring(1)).split("&"),b,a;for(a=0;a<f.length;a++)if(b=f[a].split("="),b[0]===e)return void 0===b[1]?!0:b[1]};
